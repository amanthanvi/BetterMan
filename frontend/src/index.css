@import "tailwindcss";

@font-face {
  font-family: 'Newsreader';
  src: url('/fonts/newsreader/newsreader-roman.woff2') format('woff2');
  font-weight: 200 800;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'Newsreader';
  src: url('/fonts/newsreader/newsreader-italic.woff2') format('woff2');
  font-weight: 200 800;
  font-style: italic;
  font-display: swap;
}

@font-face {
  font-family: 'JetBrains Mono';
  src: url('/fonts/jetbrains-mono/jetbrainsmono-roman.woff2') format('woff2');
  font-weight: 100 800;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'JetBrains Mono';
  src: url('/fonts/jetbrains-mono/jetbrainsmono-italic.woff2') format('woff2');
  font-weight: 100 800;
  font-style: italic;
  font-display: swap;
}

@layer base {
  :root {
    --font-serif:
      'Newsreader',
      ui-serif,
      Georgia,
      serif;
    --font-mono:
      'JetBrains Mono',
      ui-monospace,
      SFMono-Regular,
      Menlo,
      Monaco,
      Consolas,
      'Liberation Mono',
      monospace;
    --font-sans: var(--font-serif);

    --bm-bg: #f7f1e6;
    --bm-surface: #fffdf7;
    --bm-surface-2: #fbf4e7;
    --bm-fg: #1b1a17;
    --bm-muted: #5f5a52;
    --bm-border: #e2d6c4;

    --bm-accent: #b9382d;
    --bm-accent-contrast: #fff6f3;

    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  html {
    color: var(--bm-fg);
    color-scheme: light;
    background:
      radial-gradient(
          circle at 1px 1px,
          color-mix(in srgb, var(--bm-fg) 7%, transparent) 1px,
          transparent 0
        )
        0 0 / 16px 16px,
      linear-gradient(var(--bm-bg), var(--bm-bg));
  }

  @media (prefers-color-scheme: dark) {
    html:not([data-theme]) {
      --bm-bg: #0b0d10;
      --bm-surface: #10151c;
      --bm-surface-2: #0f1319;
      --bm-fg: #f0eadf;
      --bm-muted: #aca599;
      --bm-border: #202734;

      --bm-accent: #ff6b5a;
      --bm-accent-contrast: #1b0c0a;

      color-scheme: dark;
      background:
        radial-gradient(
            circle at 1px 1px,
            color-mix(in srgb, var(--bm-fg) 6%, transparent) 1px,
            transparent 0
          )
          0 0 / 16px 16px,
        linear-gradient(var(--bm-bg), var(--bm-bg));
    }
  }

  html[data-theme='dark'] {
    --bm-bg: #0b0d10;
    --bm-surface: #10151c;
    --bm-surface-2: #0f1319;
    --bm-fg: #f0eadf;
    --bm-muted: #aca599;
    --bm-border: #202734;

    --bm-accent: #ff6b5a;
    --bm-accent-contrast: #1b0c0a;

    color-scheme: dark;
    background:
      radial-gradient(
          circle at 1px 1px,
          color-mix(in srgb, var(--bm-fg) 6%, transparent) 1px,
          transparent 0
        )
        0 0 / 16px 16px,
      linear-gradient(var(--bm-bg), var(--bm-bg));
  }

  body {
    margin: 0;
    font-family: var(--font-serif);
    line-height: 1.65;
    letter-spacing: 0.01em;
  }

  code,
  pre {
    font-family: var(--font-mono);
    letter-spacing: 0.01em;
  }

  a {
    color: inherit;
    text-decoration: none;
  }

  a:hover {
    text-decoration: underline;
    text-decoration-thickness: 1px;
    text-underline-offset: 3px;
  }

  ::selection {
    background: color-mix(in srgb, var(--bm-accent) 28%, transparent);
  }

  .hljs {
    background: transparent;
    color: var(--bm-fg);
  }

  .hljs-comment,
  .hljs-quote {
    color: var(--bm-muted);
    font-style: italic;
  }

  .hljs-keyword,
  .hljs-built_in,
  .hljs-literal,
  .hljs-symbol {
    color: color-mix(in srgb, var(--bm-accent) 72%, var(--bm-fg));
    font-weight: 600;
  }

  .hljs-string,
  .hljs-title,
  .hljs-attr {
    color: color-mix(in srgb, var(--bm-accent) 38%, var(--bm-fg));
  }

  .bm-mark {
    border-radius: 0.35rem;
    padding: 0.08rem 0.22rem;
  }

  .bm-opt {
    background: color-mix(in srgb, var(--bm-accent) 14%, transparent);
    color: var(--bm-fg);
    box-shadow:
      inset 0 -1px 0 color-mix(in srgb, var(--bm-accent) 58%, transparent),
      0 1px 0 color-mix(in srgb, var(--bm-accent) 22%, transparent);
  }

  .bm-find {
    background: rgba(250, 204, 21, 0.55);
    color: var(--bm-fg);
    box-shadow:
      inset 0 -1px 0 color-mix(in srgb, var(--bm-border) 70%, transparent),
      0 1px 0 rgba(250, 204, 21, 0.15);
  }

  .bm-find-active {
    box-shadow:
      0 0 0 2px color-mix(in srgb, var(--bm-accent) 42%, transparent),
      inset 0 -1px 0 color-mix(in srgb, var(--bm-border) 70%, transparent);
  }
}
